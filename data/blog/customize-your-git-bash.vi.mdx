---
title: Tu·ª≥ ch·ªânh l·∫°i Git Bash ƒë·ªÉ tr√¥ng b·ªõt nh√†m ch√°n h∆°n
date: '2022-03-22 23:00 +0700'
summary: T∆∞·ªüng t∆∞·ª£ng b·∫°n ph·∫£i d√πng Git Bash m√† l·∫°i kh√¥ng th√≠ch giao di·ªán c·ªßa n√≥ t√≠ n√†o...
tags: ['git', 'bash', 'shell']
draft: false
image: []
canonicalUrl: customize-git-bash-shell
---

N·∫øu b·∫°n l√† web developer m√† ph·∫£i l√†m vi·ªác ch·ªß y·∫øu tr√™n m√°y Windows th√¨ ch·∫Øc √≠t nhi·ªÅu g√¨ b·∫°n c≈©ng bi·∫øt t·ªõi Git Bash. N√≥ v·ªën dƒ© d·ª±a tr√™n MinGW64 (Minimalist GNU for Windows x64). Ch·ª©c nƒÉng th√¨ n√≥ c≈©ng t·∫°m ch·∫•p nh·∫≠n ƒë∆∞·ª£c r·ªìi nh∆∞ng ƒë√¥i l√∫c nh√¨n v√†o th√¨ s·∫Ω c√≥ ph·∫ßn h∆°i ch√°n. V√¨ ph·∫£i duy tr√¨ t∆∞∆°ng th√≠ch v·ªõi nh·ªØng th√†nh ph·∫ßn c≈©, n√™n nh·ªØng ch·ª©c nƒÉng m·ªõi c·ªßa Bash √≠t c√≥ khi n√†o ƒë∆∞·ª£c m·∫∑c ƒë·ªãnh b·∫≠t l√™n. WSL l√† gi·∫£i ph√°p thay th·∫ø ho√†n h·∫£o nh∆∞ng m√† setup d∆∞·ªõi quy·ªÅn admin. Kh√¥ng ph√π h·ª£p l·∫Øm n·∫øu b·∫°n ph·∫£i l√†m tr√™n m√°y c√¥ng ty. V·∫≠y quay tr·ªü l·∫°i Git Bash, kh√¥ng sao, ch√∫ng ta c√≥ th·ªÉ tu·ª≥ ch·ªânh n√≥ ch√∫t √≠t ƒë·ªÉ n√¢ng t·∫ßm tr·∫£i nghi·ªám ü§å. Trong b√†i h∆∞·ªõng d·∫´n n√†y, m√¨nh s·∫Ω cho r·∫±ng b·∫°n ƒë√£ c√†i Git for Windows (v√† t·ªët h∆°n n·ªØa, Windows Terminal).

# Tu·ª≥ bi·∫øn c√°c file startup

Bash s·ª≠ d·ª•ng m·ªôt s·ªë file config ƒë·ªÉ tu·ª≥ ch·ªânh m√¥i tr∆∞·ªùng shell cho ng∆∞·ªùi d√πng. N√≥ s·∫Ω truy v·∫•n c√°c file theo th·ª© t·ª± `~/.bash_profile`, `~/.bash_login` r·ªìi ƒë·∫øn `~/.profile`. File ƒë·∫ßu ti√™n t·ªìn t·∫°i s·∫Ω ƒë∆∞·ª£c ƒë·ªÉ l·∫•y config.

## Bash profiles

V·∫≠y ta c·∫ßn t·∫°o file `~/.bash_profile`. File `.bash_profile` ch·ª©a c√°c commands ƒë·ªÉ thi·∫øt l·∫≠p c√°c bi·∫øn m√¥i tr∆∞·ªùng. V√¨ shell ƒëang l√† interactive n√™n file `~/.bashrc` ƒëang kh√¥ng ƒë∆∞·ª£c truy v·∫•n. Copy n·ªôi dung ƒë∆∞·ªõi ƒë√¢y v√†o file `~/.bash_profile`:

```bash:~/.bash_profile
# Source the ~/.bashrc file if it exists
if [ -f ~/.bashrc ]
then
    . ~/.bashrc
fi
```

## Bash shell script

T·∫°o file `~/.bashrc`. File `.bashrc` ch·ª©a c√°c commands d√†nh ri√™ng cho Bash shell. ƒê√¢y l√† n∆°i t·ªët nh·∫•t ƒë·ªÉ tr·ªè alias v√† ch·ª©a c√°c function li√™n quan ƒë·∫øn bash. Copy n·ªôi dung d∆∞·ªõi ƒë√¢y v√†o file:

```bash:~/.bashrc
# Git aliases
alias gs='git status -sb'
alias gcc='git checkout'
alias gcm='git checkout master'
alias gaa='git add --all'
alias gc='git commit -m $2'
alias push='git push'
alias gpo='git push origin'
alias pull='git pull'
alias clone='git clone'
alias stash='git stash'
alias pop='git stash pop'
alias ga='git add'
alias gb='git branch'
alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"
alias gm='git merge'

# Bash aliases
alias .='cd .'
alias ..='cd ..'
alias ...='cd ../../'
alias ....='cd ../../../'
alias .....='cd ../../../../'
alias bashclear='echo "" > ~/.bash_history'
alias cls='clear'
alias ls='ls -F --color=auto --show-control-chars'
alias ll='ls -l'
alias ll.='ls -la'
alias lls='ls -la --sort=size'
alias llt='ls -la --sort=time'
alias rm='rm -iv'
alias work='cd /c/repos'

# Bash shell settings
# Typing a directory name just by itself will automatically change into that directory.
shopt -s autocd

# Automatically fix directory name typos when changing directory.
shopt -s cdspell

# Automatically expand directory globs and fix directory name typos whilst completing.
# Note, this works in conjuction with the cdspell option listed above.
shopt -s direxpand dirspell

# Enable the ** globstar recursive pattern in file and directory expansions.
# For example, ls **/*.txt will list all text files in the current directory hierarchy.
shopt -s globstar

# Ignore lines which begin with a <space> and match previous entries.
# Erase duplicate entries in history file.
HISTCONTROL=ignoreboth:erasedups

# Ignore saving short- and other listed commands to the history file.
HISTIGNORE=?:??:history

# The maximum number of lines in the history file.
HISTFILESIZE=99999

# The number of entries to save in the history file.
HISTSIZE=99999

# Set Bash to save each command to history, right after it has been executed.
PROMPT_COMMAND='history -a'

# Save multi-line commands in one history entry.
shopt -s cmdhist

# Append commands to the history file, instead of overwriting it.
# History substitution are not immediately passed to the shell parser.
shopt -s histappend histverify
```

## Git Bash prompt

Git Bash prompt ƒë∆∞·ª£c c√†i ƒë·∫∑t b·ªüi m·ªôt ƒëo·∫°n shell script t√™n l√† `git-prompt.sh` v√† n√≥ c√≥ th·ªÉ ƒë∆∞·ª£c t√¨m th·∫•y trong th∆∞ m·ª•c `c/Program\ Files/Git/etc/profile.d`. ƒê·ªÉ √Ω ·ªü d√≤ng 8-10, m·ªôt file `~/.config/git/git-prompt.sh` tu·ª≥ ch·ªânh s·∫Ω ƒë∆∞·ª£c truy v·∫•n n·∫øu c√≥ t·ªìn t·∫°i. ƒê√¢y l√† c∆° h·ªôi c·ªßa ch√∫ng ta ƒë·ªÉ ghi ƒë√® l·∫°i c√°c thi·∫øt l·∫≠p m·∫∑c ƒë·ªãnh.

```bash:git-prompt.sh
# lines omitted
if test -f ~/.config/git/git-prompt.sh
then
    . ~/.config/git/git-prompt.sh
else
    # lines omitted
fi
# lines omitted
```

V·∫≠y n√™n ch√∫ng ta s·∫Ω t·∫°o file `~/.config/git/git-prompt.sh`. File `git-prompt.sh` ch·ª©a c√°c √¢u l·ªánh ƒë·ªÉ ƒë·∫∑t title cho terminal Git Bash v√† thay ƒë·ªïi ƒëo·∫°n string prompt m·∫∑c ƒë·ªãnh. ƒê√¢y l√† n∆°i b·∫°n quy·∫øt ƒë·ªãnh Git Bash s·∫Ω tr√¥ng nh∆∞ th·∫ø n√†o. D∆∞·ªõi ƒë√¢y l√† m·ªôt v√≠ d·ª•:

```bash:~/.config/git/git-prompt.sh
# Custom prompt settings
PROMPT_DIRTRIM=4                         # l√†m ng·∫Øn l·∫°i ƒë·ªô s√¢u hi·ªÉn th·ªã trong prompt
PS1='\[\033]0;Git | Bash v\v | \W\007\]' # ƒë·∫∑t title cho terminal Git Bash
PS1="$PS1"'\n'                           # d√≤ng n·ªõi
PS1="$PS1"'\[\033[30;45m\] [\A] '        # ch·ªØ ƒëen, n·ªÅn magenta, gi·ªù theo ki·ªÉu 24h
PS1="$PS1"'\[\033[30;42m\] \u '          # ch·ªØ ƒëen, n·ªÅn xanh l√°, t√™n user
#PS1="$PS1"'\[\033[30;42m\]@\h '          # ch·ªØ ƒëen, n·ªÅn xanh l√°, @host
PS1="$PS1"'\[\033[30;43m\] \w '          # ch·ªØ ƒëen, n·ªÅn v√†ng, th∆∞ m·ª•c hi·ªán t·∫°i
if test -z "$WINELOADERNOEXEC"
then
    GIT_EXEC_PATH="$(git --exec-path 2>/dev/null)"
    COMPLETION_PATH="${GIT_EXEC_PATH%/libexec/git-core}"
    COMPLETION_PATH="${COMPLETION_PATH%/lib/git-core}"
    COMPLETION_PATH="$COMPLETION_PATH/share/git/completion"
    if test -f "$COMPLETION_PATH/git-prompt.sh"
    then
        . "$COMPLETION_PATH/git-completion.bash"
        . "$COMPLETION_PATH/git-prompt.sh"
        PS1="$PS1"'\[\033[97;46m\]'  # ch·ªØ tr·∫Øng, n·ªÅn cyan
        PS1="$PS1"'`__git_ps1`'      # bash function
    fi
fi
PS1="$PS1"'\[\033[0m\]'        # ƒë·ªïi m√†u
PS1="$PS1"'\n'                 # d√≤ng m·ªõi
PS1="$PS1"'$ '                 # prompt: always $

# Git status options
# Shows * or + for unstaged and staged changes, respectively.
export GIT_PS1_SHOWSTASHSTATE=true

# shows $ if there are any stashes.
export GIT_PS1_SHOWDIRTYSTATE=true

# Shows % if there are any untracked files.
export GIT_PS1_SHOWUNTRACKEDFILES=true

# shows <, >, <>, or = when your branch is behind, ahead, diverged from,
# or in sync with the upstream branch, respectively.
export GIT_PS1_SHOWUPSTREAM="auto"
```

## C√†i ƒë·∫∑t ng∆∞·ªùi d√πng

T·∫°o file `~/.inputrc`, n∆°i b·∫°n s·∫Ω c√†i ƒë·∫∑t l·ªãch s·ª≠ c√¢u l·ªánh, c√°c hi·ªÉn th·ªã th∆∞ m·ª•c, v√† ph√≠m t·∫Øt s·ª≠ d·ª•ng th∆∞ vi√™n GNU Readline s·∫µn c√≥.

```bash:~/.inputrc
# Disable beeps & bells, and do not display control characters.
set bell-style none
set echo-control-characters off

# The TAB key cycles forward through the completion choices.
# Press an arrow key, such as right-arrow, to choose a selection.
TAB: menu-complete

# The Shift-TAB key cycles backward through the completion choices.
# Like TAB, press an arrow key, such as right-arrow, to choose a selection.
"\e[Z": menu-complete-backward

# The first TAB key press will display a list that match the given prefix.
# The next TAB key press will start cycling through the available choices.
set menu-complete-display-prefix on

# Display completion matches upon the first press of the TAB key.
#set show-all-if-ambiguous on

#Enable colors when completing filenames and directories.
set colored-stats on

# Completion matches of multiple items highlight the matching prefix in color.
set colored-completion-prefix on

# Ignore case when completing.
set completion-ignore-case on

# Treat hypens and underscores as equivalent when completing.
set completion-map-case on

# Append the / character to the end of symlinked directories when completing.
set mark-symlinked-directories on

# Enable incremental history navigation with the UP and DOWN arrow keys.
# This will use the already typed text as a required prefix.
"\e[A": history-search-backward
"\e[B": history-search-forward
```

D∆∞·ªõi ƒë√¢y l√† m·ªôt v√†i ph√≠m t·∫Øt m√† th∆∞ vi·ªán Readline h·ªó tr·ª£:

| Ph√≠m t·∫Øt        | M√¥ t·∫£                             |
| --------------- | --------------------------------- |
| Control-A       | ƒê∆∞a tr·ªè ƒë·∫øn ƒë·∫ßu d√≤ng.             |
| Control-E       | ƒê∆∞a tr·ªè ƒë·∫øn cu·ªëi d√πng.            |
| Alt-B           | ƒê∆∞a tr·ªè v·ªÅ tr∆∞·ªõc m·ªôt t·ª´.          |
| Alt-F           | ƒê∆∞a tr·ªè v·ªÅ sau m·ªôt t·ª´.            |
| Alt-Backspace   | Xo√° ƒë·∫±ng tr∆∞·ªõc m·ªôt t·ª´.            |
| Alt-D           | Xo√° ƒë·∫±ng sau m·ªôt t·ª´.              |
| Control-R       | T√¨m trong l·ªãch s·ª≠.                |
| Control-R       | Cu·ªôn v·ªÅ tr∆∞·ªõc trong l·ªãch s·ª≠.      |
| Control-Shift-R | Cu·ªôn v·ªÅ sau trong l·ªãch s·ª≠.        |
| Alt-.           | Th√™m argument c·ªßa c√¢u l·ªánh tr∆∞·ªõc. |

# C√°c utility c·ªßa Bash

V√†i Bash utilities c≈©ng ƒë∆∞·ª£c ƒëi k√®m v·ªõi Git for Windows v√† c√≥ th·ªÉ ƒë∆∞·ª£c d√πng ƒë·ªÉ n√¢ng t·∫ßm tr·∫£i nghi·ªám Git n·∫øu nh∆∞ m·∫∑c ƒë·ªãnh l√† ch∆∞a ƒë·ªß ƒë·ªëi v·ªõi b·∫°n. C√°c utility c·∫ßn ƒë∆∞·ª£c c√†i ƒë·∫∑t l·∫°i m·ªói l·∫ßn m·ªü. Tham kh·∫£o [Pro Git Book](https://git-scm.com/book/cs/v2/Appendix-A%3A-Git-in-Other-Environments-Git-in-Bash) ƒë·ªÉ xem th√¥ng tin v·ªÅ ph·∫ßn n√†y.

Script _git-completion_ v√† _git-prompt_ c√≥ th·ªÉ ƒë∆∞·ª£c t√¨m th·∫•y ·ªü: `/c/Program\ Files/Git/mingw64/share/git/completion/`. Copy `git-completion.bash` v√† `git-prompt.sh` v√†o th∆∞ m·ª±c home/user c·ªßa b·∫°n.

ƒê·ªÉ s·ª≠ d·ª•ng hai script tr√™n, th√™m c√°c d√≤ng sau v√†o `~/.bashrc`:

```bash:~/.bashrc
# Enable tab completion for Git commands
source ~/.git-completion.bash
# Change bash prompt to display current Git branch and status
source ~/.git-prompt.sh
```

B√†i g·ªëc c·ªßa [@Blikoor](https://dev.to/blikoor/customize-git-bash-shell-498l).
